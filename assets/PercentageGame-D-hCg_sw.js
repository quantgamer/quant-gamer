import{d as z,r as u,a as N,c as H,b as v,e as t,n as g,w as y,q as R,f as D,g as _,h as C,t as d,p as O,i as Y,j as F,k as J,l as W,o as f,_ as X}from"./index-BVjIuum-.js";const Z={class:"percentagegame"},$={class:"game-container"},ee={key:0,class:"settings"},te={class:"mode-cards"},se={class:"duration-row"},ae={class:"duration-label"},ne={class:"duration-input-wrap"},oe=["disabled"],le={key:1,class:"game"},re={class:"game-stats"},ue={class:"stat"},ie={class:"question-card"},de={class:"numbers-display"},me={class:"num-big"},ce={class:"num-big"},pe={key:0,class:"hint-text"},ve={class:"question-area"},ge={key:2,class:"game-over"},fe={class:"game-over-score"},be=z({__name:"PercentageGame",setup(we){const m=u(!1),b=u(0),c=u(0),p=u(!1),r=u(null),i=u(!1),a=N({mode:"exact",duration:120});let w=null;const E=()=>{w!==null&&(clearInterval(w),w=null)},G=()=>{c.value>0?c.value-=1:h()},q=()=>{E(),m.value=!0,p.value=!1,b.value=0,c.value=a.duration,w=setInterval(G,1e3),S()},h=()=>{m.value&&(E(),p.value=!0)},M=()=>{E(),m.value=!1,p.value=!1,r.value=null,i.value=!1},o=N({numerator:0,denominator:0,answer:0,isExact:!0}),T=u(null),x=(s,e)=>Math.floor(Math.random()*(e-s+1))+s,I=(s,e)=>e===0?s:I(e,s%e),B=()=>{let s=0,e=0,l=0,n=0;do{if(l=x(1,199),l===100)continue;const A=100/I(l,100),L=Math.max(1,Math.floor(600/A)),j=x(1,L);e=A*j,s=l*e/100,n++}while(e<10&&n<60);return{numerator:s,denominator:e,answer:l}},K=()=>{let s=0;for(;s<120;){const e=x(10,200),l=x(1,Math.ceil(e*2)),n=l/e*100,k=Math.round(n);if(!Number.isInteger(n)&&k>=1&&k<=200)return{numerator:l,denominator:e,answer:k};s++}return{numerator:7,denominator:10,answer:70}},S=()=>{const e=a.mode==="exact"?B():K();o.numerator=e.numerator,o.denominator=e.denominator,o.answer=e.answer,o.isExact=a.mode==="exact",r.value=null,i.value=!1},P=H(()=>!!a.mode),V=()=>{r.value===null||r.value===void 0||(r.value===o.answer?(b.value+=1,S(),J(()=>{var s;return(s=T.value)==null?void 0:s.focus()})):(i.value=!0,setTimeout(()=>i.value=!1,600)))},Q=s=>{["-","+",".","e","E"].includes(s.key)&&s.preventDefault()},U=()=>{a.duration=Math.max(30,Math.floor(isNaN(a.duration)?30:a.duration))};return(s,e)=>{const l=W("RouterLink");return f(),v("div",Z,[e[21]||(e[21]=t("h1",null,"Percentage Game",-1)),t("div",$,[m.value?_("",!0):(f(),v("div",ee,[e[12]||(e[12]=t("p",{class:"settings-subtitle"},"Calculate what percentage one number is of another",-1)),t("div",te,[t("label",{class:g(["mode-card",{active:a.mode==="exact"}])},[y(t("input",{type:"radio","onUpdate:modelValue":e[0]||(e[0]=n=>a.mode=n),value:"exact"},null,512),[[R,a.mode]]),e[4]||(e[4]=t("span",{class:"mode-symbol"},"= %",-1)),e[5]||(e[5]=t("span",{class:"mode-label"},"Exact",-1)),e[6]||(e[6]=t("span",{class:"mode-desc"},"The answer is always a whole number percentage",-1))],2),t("label",{class:g(["mode-card",{active:a.mode==="approximate"}])},[y(t("input",{type:"radio","onUpdate:modelValue":e[1]||(e[1]=n=>a.mode=n),value:"approximate"},null,512),[[R,a.mode]]),e[7]||(e[7]=t("span",{class:"mode-symbol"},"≈ %",-1)),e[8]||(e[8]=t("span",{class:"mode-label"},"Approximate",-1)),e[9]||(e[9]=t("span",{class:"mode-desc"},"Round to the nearest whole percentage",-1))],2)]),t("div",se,[t("label",ae,[e[11]||(e[11]=t("span",null,"⏱ Duration",-1)),t("div",ne,[y(t("input",{type:"number","onUpdate:modelValue":e[2]||(e[2]=n=>a.duration=n),onBlur:U,min:"30",step:"30"},null,544),[[D,a.duration,void 0,{number:!0}]]),e[10]||(e[10]=t("span",{class:"unit"},"sec",-1))])])]),t("button",{class:"start-btn",onClick:q,disabled:!P.value},"Start Game",8,oe)])),m.value&&!p.value?(f(),v("div",le,[t("div",re,[t("span",ue,[e[13]||(e[13]=C("Score: ")),t("strong",null,d(b.value),1)]),t("span",{class:g(["stat timer",{urgent:c.value<=10}])},[e[14]||(e[14]=C(" Time: ")),t("strong",null,d(c.value)+"s",1)],2)]),t("div",ie,[t("div",{class:g(["mode-badge",{approx:!o.isExact}])},d(o.isExact?"Exact":"Approximate"),3),t("div",de,[t("span",me,d(o.numerator),1),e[15]||(e[15]=t("span",{class:"connector"},"is what % of",-1)),t("span",ce,d(o.denominator),1),e[16]||(e[16]=t("span",{class:"question-mark"},"?",-1))]),o.isExact?_("",!0):(f(),v("p",pe," Round to the nearest whole percentage "))]),t("div",ve,[t("div",{class:g(["answer-row",{shake:i.value,wrong:i.value}])},[y(t("input",{ref_key:"answerInput",ref:T,class:"answer-input",type:"number","onUpdate:modelValue":e[3]||(e[3]=n=>r.value=n),onKeyup:O(V,["enter"]),onKeydown:Q,placeholder:"",autofocus:""},null,544),[[D,r.value,void 0,{number:!0}]]),e[17]||(e[17]=t("span",{class:"answer-unit"},"%",-1))],2),t("button",{class:"submit-btn",onClick:V},"Submit")]),t("button",{class:"back-btn",onClick:M},"Return to Settings")])):_("",!0),p.value?(f(),v("div",ge,[e[19]||(e[19]=t("p",{class:"game-over-title"},"Time's up!",-1)),t("p",fe,[e[18]||(e[18]=C("You scored ")),t("strong",null,d(b.value),1)]),t("button",{class:"start-btn",onClick:M},"Play Again")])):_("",!0)]),t("nav",null,[Y(l,{to:"/"},{default:F(()=>e[20]||(e[20]=[C("Home")])),_:1})])])}}}),ke=X(be,[["__scopeId","data-v-7276efb3"]]);export{ke as default};
