import{d as ee,r as c,a as W,c as te,b as v,e,n as p,w as b,v as R,f as $,g as V,h as S,t as u,F as se,m as ne,p as oe,i as le,j as ae,k as ie,l as ue,o as m,_ as re}from"./index-BLglKC1t.js";const de={class:"probabilitygame"},ce={class:"game-container"},pe={key:0,class:"settings"},ve={class:"qtype-cards"},be={class:"duration-row"},me={class:"duration-label"},fe={class:"duration-input-wrap"},ye=["disabled"],xe={key:1,class:"game"},Pe={class:"game-stats"},Ce={class:"stat"},ge={class:"scenario-card"},ke={class:"scenario-table"},Ee={class:"state-name"},qe={class:"prob-cell"},we={class:"num-cell"},he={class:"num-cell"},Me={class:"question-area"},Re={class:"question-text"},Se={class:"hint-text"},Te={class:"answer-unit"},Be={key:2,class:"game-over"},Ne={class:"game-over-score"},Ve=ee({__name:"ProbabilityGame",setup(Ge){const f=c(!1),q=c(0),y=c(0),x=c(!1),r=c(null),d=c(!1),n=W({includeExpectedProfit:!0,includeExpectedRevenue:!1,includeExpectedCost:!1,includeProbProfitable:!0,duration:120});let w=null;const T=()=>{w!==null&&(clearInterval(w),w=null)},D=()=>{y.value>0?y.value-=1:K()},F=()=>{T(),f.value=!0,x.value=!1,q.value=0,y.value=n.duration,w=setInterval(D,1e3),_()},K=()=>{f.value&&(T(),x.value=!0)},G=()=>{T(),f.value=!1,x.value=!1,r.value=null,d.value=!1},i=W({scenarios:[],questionText:"",hint:"",answer:0,unit:"",questionType:""}),I=c(null),L=[[.5,.5],[.4,.6],[.3,.7],[.2,.8],[.1,.9],[.3,.4,.3],[.2,.5,.3],[.1,.6,.3],[.2,.4,.4],[.1,.5,.4],[.2,.3,.5],[.1,.4,.5],[.2,.2,.6],[.3,.3,.4]],Q=[["Bull Market","Bear Market"],["Strong","Weak"],["Boom","Bust"],["Favorable","Unfavorable"],["Growth","Contraction"]],j=[["Strong","Normal","Weak"],["Good","Average","Poor"],["Boom","Steady","Recession"],["Favorable","Neutral","Adverse"],["Bull","Flat","Bear"]],U=(o,t)=>Math.floor(Math.random()*(t-o+1))+o,h=o=>o[Math.floor(Math.random()*o.length)],_=()=>{const o=h(L),t=o.length,B=h(t===2?Q:j),s=o.map((a,l)=>{const N=U(3,15)*10,J=Math.max(1,Math.floor(N*.5/10)),X=Math.ceil(N*1.4/10),Z=U(J,X)*10;return{name:B[l],probability:a,revenue:N,cost:Z}}),P=[];n.includeExpectedProfit&&P.push("expectedProfit"),n.includeExpectedRevenue&&P.push("expectedRevenue"),n.includeExpectedCost&&P.push("expectedCost"),n.includeProbProfitable&&P.push("probProfitable");const M=h(P);let C="",g="",k=0,E="";M==="expectedProfit"?(k=Math.round(s.reduce((a,l)=>a+l.probability*(l.revenue-l.cost),0)),C="What is the expected profit?",g="E[Profit] = Σ P × (Revenue − Cost)",E="$M"):M==="expectedRevenue"?(k=Math.round(s.reduce((a,l)=>a+l.probability*l.revenue,0)),C="What is the expected revenue?",g="E[Revenue] = Σ P × Revenue",E="$M"):M==="expectedCost"?(k=Math.round(s.reduce((a,l)=>a+l.probability*l.cost,0)),C="What is the expected cost?",g="E[Cost] = Σ P × Cost",E="$M"):(k=Math.round(s.filter(a=>a.revenue>a.cost).reduce((a,l)=>a+l.probability,0)*100),C="What is the probability of being profitable?",g="P(Profitable) = sum of P where Revenue > Cost",E="%"),i.scenarios=[...s],i.questionText=C,i.hint=g,i.answer=k,i.unit=E,i.questionType=M,r.value=null,d.value=!1},z=te(()=>n.includeExpectedProfit||n.includeExpectedRevenue||n.includeExpectedCost||n.includeProbProfitable),A=()=>{r.value===null||r.value===void 0||(r.value===i.answer?(q.value+=1,r.value=null,d.value=!1,_(),ie(()=>{var o;return(o=I.value)==null?void 0:o.focus()})):(d.value=!0,setTimeout(()=>d.value=!1,600)))},H=o=>{["+",".","e","E"].includes(o.key)&&o.preventDefault()},O=()=>{n.duration=Math.max(30,Math.floor(isNaN(n.duration)?30:n.duration))},Y=o=>`${Math.round(o*100)}%`;return(o,t)=>{const B=ue("RouterLink");return m(),v("div",de,[t[27]||(t[27]=e("h1",null,"Probability Game",-1)),e("div",ce,[f.value?V("",!0):(m(),v("div",pe,[t[20]||(t[20]=e("p",{class:"settings-subtitle"},"Calculate expected profitability from revenue & cost distributions",-1)),e("div",ve,[e("label",{class:p(["qtype-card",{active:n.includeExpectedProfit}])},[b(e("input",{type:"checkbox","onUpdate:modelValue":t[0]||(t[0]=s=>n.includeExpectedProfit=s)},null,512),[[R,n.includeExpectedProfit]]),t[6]||(t[6]=e("span",{class:"qtype-symbol"},"E[π]",-1)),t[7]||(t[7]=e("span",{class:"qtype-label"},"Expected Profit",-1)),t[8]||(t[8]=e("span",{class:"qtype-formula"},"Σ P × (R − C)",-1))],2),e("label",{class:p(["qtype-card",{active:n.includeProbProfitable}])},[b(e("input",{type:"checkbox","onUpdate:modelValue":t[1]||(t[1]=s=>n.includeProbProfitable=s)},null,512),[[R,n.includeProbProfitable]]),t[9]||(t[9]=e("span",{class:"qtype-symbol"},"P(+)",-1)),t[10]||(t[10]=e("span",{class:"qtype-label"},"P(Profitable)",-1)),t[11]||(t[11]=e("span",{class:"qtype-formula"},"Σ P where R > C",-1))],2),e("label",{class:p(["qtype-card",{active:n.includeExpectedRevenue}])},[b(e("input",{type:"checkbox","onUpdate:modelValue":t[2]||(t[2]=s=>n.includeExpectedRevenue=s)},null,512),[[R,n.includeExpectedRevenue]]),t[12]||(t[12]=e("span",{class:"qtype-symbol"},"E[R]",-1)),t[13]||(t[13]=e("span",{class:"qtype-label"},"Expected Revenue",-1)),t[14]||(t[14]=e("span",{class:"qtype-formula"},"Σ P × Revenue",-1))],2),e("label",{class:p(["qtype-card",{active:n.includeExpectedCost}])},[b(e("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=s=>n.includeExpectedCost=s)},null,512),[[R,n.includeExpectedCost]]),t[15]||(t[15]=e("span",{class:"qtype-symbol"},"E[C]",-1)),t[16]||(t[16]=e("span",{class:"qtype-label"},"Expected Cost",-1)),t[17]||(t[17]=e("span",{class:"qtype-formula"},"Σ P × Cost",-1))],2)]),e("div",be,[e("label",me,[t[19]||(t[19]=e("span",null,"⏱ Duration",-1)),e("div",fe,[b(e("input",{type:"number","onUpdate:modelValue":t[4]||(t[4]=s=>n.duration=s),onBlur:O,min:"30",step:"30"},null,544),[[$,n.duration,void 0,{number:!0}]]),t[18]||(t[18]=e("span",{class:"unit"},"sec",-1))])])]),e("button",{class:"start-btn",onClick:F,disabled:!z.value},"Start Game",8,ye)])),f.value&&!x.value?(m(),v("div",xe,[e("div",Pe,[e("span",Ce,[t[21]||(t[21]=S("Score: ")),e("strong",null,u(q.value),1)]),e("span",{class:p(["stat timer",{urgent:y.value<=10}])},[t[22]||(t[22]=S(" Time: ")),e("strong",null,u(y.value)+"s",1)],2)]),e("div",ge,[e("table",ke,[t[23]||(t[23]=e("thead",null,[e("tr",null,[e("th",null,"Market State"),e("th",null,"Probability"),e("th",null,"Revenue ($M)"),e("th",null,"Cost ($M)")])],-1)),e("tbody",null,[(m(!0),v(se,null,ne(i.scenarios,s=>(m(),v("tr",{key:s.name,class:p({profitable:s.revenue>s.cost,loss:s.revenue<=s.cost})},[e("td",Ee,u(s.name),1),e("td",qe,u(Y(s.probability)),1),e("td",we,u(s.revenue),1),e("td",he,u(s.cost),1)],2))),128))])])]),e("div",Me,[e("p",Re,u(i.questionText),1),e("p",Se,u(i.hint),1),e("div",{class:p(["answer-row",{shake:d.value,wrong:d.value}])},[b(e("input",{ref_key:"answerInput",ref:I,class:"answer-input",type:"number","onUpdate:modelValue":t[5]||(t[5]=s=>r.value=s),onKeyup:oe(A,["enter"]),onKeydown:H,placeholder:"?",autofocus:""},null,544),[[$,r.value,void 0,{number:!0}]]),e("span",Te,u(i.unit),1)],2),e("button",{class:"submit-btn",onClick:A},"Submit")]),e("button",{class:"back-btn",onClick:G},"Return to Settings")])):V("",!0),x.value?(m(),v("div",Be,[t[25]||(t[25]=e("p",{class:"game-over-title"},"Time's up!",-1)),e("p",Ne,[t[24]||(t[24]=S("You scored ")),e("strong",null,u(q.value),1)]),e("button",{class:"start-btn",onClick:G},"Play Again")])):V("",!0)]),e("nav",null,[le(B,{to:"/"},{default:ae(()=>t[26]||(t[26]=[S("Home")])),_:1})])])}}}),Ue=re(Ve,[["__scopeId","data-v-a6d4bf21"]]);export{Ue as default};
